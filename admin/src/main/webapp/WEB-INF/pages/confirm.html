<!DOCTYPE HTML>
<html>
	<head>
		<title>确定指定值及不确定度-实验室能力验证计算分析系统</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets_pt/css/main.css" />

		<script src="dist/js/jquery.min.js"></script>
		<script src="dist/js/jquery.jexcel.js"></script>
		<script src="dist/js/jquery.jcalendar.js"></script>
		<link rel="stylesheet" href="dist/css/jquery.jexcel.css" type="text/css" />
		<link rel="stylesheet" href="dist/css/jquery.jcalendar.css" type="text/css" />

		<!--Basic Styles-->
	     <link href="assets_pt/assets/css/bootstrap.min.css" rel="stylesheet" />
	     <link id="bootstrap-rtl-link" href="" rel="stylesheet" />
	     <link href="assets_pt/assets/css/font-awesome.min.css" rel="stylesheet" />
	     <link href="assets_pt/assets/css/weather-icons.min.css" rel="stylesheet" />
	     <!--Beyond styles-->
	     <link id="beyond-link" href="assets_pt/assets/css/beyond.min.css" rel="stylesheet" />
	     <link href="assets_pt/assets/css/demo.min.css" rel="stylesheet" />
	     <link href="assets_pt/assets/css/typicons.min.css" rel="stylesheet" />
	     <link href="assets_pt/assets/css/animate.min.css" rel="stylesheet" />
	     <link id="skin-link" href="" rel="stylesheet" type="text/css" />

	     <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
	     <script src="assets_pt/assets/js/skins.min.js"></script>
		<script src="assets_pt/js/layer/layer.js"></script>


		<script type="text/javascript">
        $(document).ready(function(){
          $("#cmb_confirmvalue").change(function(){

              if($("#cmb_confirmvalue").val() == "outervalue"){
                $("#div_outer").css("display","block");
                $("#div_sample").css("display","none");
                $("#div_stab").css("display","none");
              }
              else if ($("#cmb_confirmvalue").val() == "refvalue"){
                $("#div_outer").css("display","none");
                $("#div_sample").css("display","block");
                $("#div_stab").css("display","none");
              }
              else {
                $("#div_outer").css("display","none");
                $("#div_sample").css("display","none");
                $("#div_stab").css("display","block");
              }
            })
      });
		</script>
	</head>
	<body>

		<!-- Header -->
			<section id="header">
				<header>
					<span class="image avatar"></span>
					<h1 id="logo" style="font-family:黑体"><a href="#">能力验证统计<br>分析系统</a></h1>

				</header>
				<nav id="nav">
					<ul>

						<li><a href="calstats.jhtml" >计算汇总统计量</a></li>
						<li><a href="stab.jhtml">稳健方法</a></li>
						<li><a href="hs.jhtml">均匀性和稳定性检验</a></li>
						<li><a href="confirm.jhtml" class="active">确定指定值及其不确定度</a></li>
						<li><a href="stddev.jhtml">确定标准差</a></li>
						<li><a href="ce.jhtml">能力评定</a></li>
						<li><a href="graphic.jhtml">图示法</a></li>
					</ul>
				</nav>
				<footer>
					<ul class="icons">
						<li>&copy; 中国标准化研究院</li>
					</ul>
				</footer>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<!-- Two -->
            <div class="container"  style="margin-left:20px">

              <br/>
              <div class="features">

                <br />
                <div class="row uniform">
                  <div style="width:160px">确定指定值的方法:</div>
                  <div class="3u" style="margin-top:-10px">
                    <div class="select-wrapper">
                      <div class="select-wrapper" id="div_confirmval" name="div_confirmval">
                        <select  id="cmb_confirmvalue" >
                          <option value="outervalue">由外部值指定</option>
                          <option value="refvalue">参照有证标准样品</option>
                          <option value="publicdiscussvalue">由稳健方法确定公议值</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="div_parameter">
                  <div class="row uniform" id="div_outer" style="display:block">
                      <div  style="width:152px">指定值：</div>
                      <div class="2u"  style="margin-top:-10px;margin-left:-30px">
                            <input type="text" id="txt_specialval" />
                      </div>
                      <div  style="width:140px">不确定度：</div>
                      <div class="2u" style="margin-top:-10px;margin-left:-30px">
                        <input type="text" id="txt_uncertainty1" />
                      </div>
                  </div>
                  <div class="row uniform" id="div_sample" style="display:none">
                      <div  style="width:150px">有证标准样品的标称值<span style="font-name:vijaya;font-size:12pt">x</span><sub>CRM</sub>：</div>
                      <div class="2u"  style="margin-top:7px;margin-left:-30px">
                            <input type="text" id="txt_stdsampleval" />
                      </div>
                      <div  style="width:150px">有证标准样品的标准不确定度<span style="font-name:vijaya;font-size:12pt">u</span><sub>CRM</sub>：</div>
                      <div class="2u" style="margin-top:7px;margin-left:-30px">
                        <input type="text" id="txt_uncertainty2" />
                      </div>
                  </div>
                  <div class="row uniform" id="div_stab" style="display:none">
                    <div  style="width:150px">选择稳定方法：</div>
                    <div class="3u" style="margin-top:-10px;margin-left:10px;">
                      <div class="select-wrapper">
                      <select id="stability" name="stability">
                        <option value ="algorithmA">算法A</option>
                        <option value="QHampel">Q/Hampel方法</option>

                      </select></div></div>

                  </div>
                </div>
                <div class="row uniform">
                  <div class="2u">
                    <ul class="actions">
                      <li>
                          <button class="btn btn-success shiny" id="btn_datainput" data-toggle="modal" data-target="#div_confirm_input">输入实验室数据</button>
                      </li>
                    </ul>
                  </div>
                  <div class="2u" style="">
					  <a href="javascript:calculate();" class="btn btn-primary shiny">计算</a>
                  </div>
                </div>
                <br />
                <div style="height:400px">
                  <div class="2u 64u(xsmall)">计算结果:</div>
                  <div class="12u" style="margin-top:-10px">
                  </div>
                </div>
                <div>
                </div>
              </div>
            </div>
					</div>
			</div>
			<!--LArge Modal Templates-->
		    <div class="modal fade bs-example-modal-lg" id="div_confirm_input" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
		        <div class="modal-dialog modal-lg">
		            <div class="modal-content">
		                <div class="modal-header">
		                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		                    <h4 class="modal-title" id="myLargeModalLabel">导入实验室检测数据</h4>
		                </div>
		                <div class="modal-body" id="my">
						</div>
						<div style="margin-left:20%;margin-bottom:4px">
							<button id="btn_save" class="btn btn-primary shiny" data-dismiss="modal" aria-hidden="true">保存</button>
						</div>
		            </div><!-- /.modal-content -->
		        </div><!-- /.modal-dialog -->
		    </div>
		<!-- Scripts -->
			<!--Basic Scripts-->
		     <script src="assets_pt/assets/js/bootstrap.min.js"></script>

		     <!--Beyond Scripts-->
		     <script src="assets_pt/assets/js/beyond.min.js"></script>
				 <script src="assets_pt/assets/js/bootbox/bootbox.js"></script>

			<script src="assets_pt/js/jquery.scrollzer.min.js"></script>
			<script src="assets_pt/js/jquery.scrolly.min.js"></script>
			<script src="assets_pt/js/skel.min.js"></script>
			<script src="assets_pt/js/util.js"></script>
			<script src="assets_pt/js/main.js"></script>
			<script>
				data = [
                    ['1.4','1.5','1.643','1.235','1.555','1.185','1.955','1.725','1.295','1.365','1.425'],
                    ['1.324','1.534','1.143','1.635','1.585','1.615','1.395','1.425','1.555','1.265','1.865']

				];

				$('#my').jexcel({
					data:data,
					colHeaders: [ '结果1'],
					colWidths: [ 50, 50 ],
					minDimensions:[11,2],
					columns: [
						{ type: 'text' },
						{ type: 'text'},
					]
				});
                var input;
                $('#btn_save').on('click', function () {
                    input = $('#my').jexcel('getData');

                });
                function calculate() {
                    var method =$("#cmb_confirmvalue").val()
                    if("outervalue"==method){
                        console.log($("#txt_specialval").val())
                        console.log($("#txt_uncertainty1").val())
					}else{
                        if(input!=null) {
                            var xcrm = $("#txt_stdsampleval").val();
                            var ucrm = $("#txt_uncertainty2").val();
                            if("refvalue"==method) {
                                if ("" == xcrm || "" == ucrm) return layer.msg("请输入参数！"), !1;
                                $.post("statistical/confirm.jhtml", {
                                    "input": JSON.stringify(input),"method":method,"xcrm":xcrm,"ucrm":ucrm
                                }, function (result) {
                                    if (result.status != 200) {
                                        return layer.msg(result.message),!1;
                                    } else {
                                        // $('#div_v_avg').html(result.average)
                                        console.log(result.result)
                                    }
                                }, "json");
                            }else {
                                method = $("#stability").val();
                                $.post("statistical/confirm.jhtml", {
                                    "input": JSON.stringify(input),"method":method,"xcrm":xcrm,"ucrm":ucrm
                                }, function (result) {
                                    if (result.status != 200) {
                                        return layer.msg(result.message),!1;
                                    } else {
                                        // $('#div_v_avg').html(result.average)
                                        console.log(result.result)
                                    }
                                }, "json");
                            }
                        }else{
                            return layer.msg("输入数据没有值！"), !1;
                        }
					}
                }
			</script>
	</body>
</html>
